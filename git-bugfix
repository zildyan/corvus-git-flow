#!/usr/bin/python


from git import validate_repository
from git import create_new_bugfix_branch
from sys import argv, exit
from git import GitError


def usage(): print(
    """
  Creates new BUGFIX branch from STABLE branch,
  with name formatted to BUGFIX/name.
""")


if len(argv) == 1 or len(argv) > 2:
    exit('  Need to specify name of the branch.')

elif 'help' in argv:
    usage()
    exit()

bugfix_name = argv[1]

if '.' in bugfix_name:
    exit("  %s is not a valid branch name." & bugfix_name)

try:
    validate_repository()
    success_msg = create_new_bugfix_branch(bugfix_name)
    print(success_msg)

except GitError as ex:
    exit(ex.value)
